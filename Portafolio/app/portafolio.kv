#:import MDNavigationLayout kivymd.uix.navigationdrawer.MDNavigationLayout
#:import MDNavigationDrawer kivymd.uix.navigationdrawer.MDNavigationDrawer
#:import MDList kivymd.uix.list.MDList
#:import dp kivy.metrics.dp
#:import FitImage kivymd.uix.fitimage.FitImage

FloatLayout:
    canvas.before:
        Color:
            rgba: (245/255, 245/255, 245/255, 1)  # Gris claro
        Rectangle:
            pos: self.pos
            size: self.size

    MDNavigationLayout:

        ScreenManager:
            id: screen_manager

            FondoWidget:
                name: "home"

            ProyectosScreen:
                name: "proyectos"

            SobreMiScreen:
                name: "sobremi"
            
            HabilidadesScreen:
                name: "habilidades"

        MDNavigationDrawer:
            id: nav_drawer
            md_bg_color: (245/255, 245/255, 245/255, 1)  # Gris claro

            BoxLayout:
                orientation: 'vertical'
                padding: "8dp"
                spacing: "8dp"

                MDList:
                    NoRippleListItem:
                        text: "Inicio"
                        icon: "home"
                        on_release:
                            app.root.ids.nav_drawer.set_state("close")
                            app.root.ids.screen_manager.current = "home"

                    NoRippleListItem:
                        text: "Sobre mi"
                        icon: "account"
                        on_release:
                            app.root.ids.nav_drawer.set_state("close")
                            app.root.ids.screen_manager.current = "sobremi"

                    NoRippleListItem:
                        text: "Mis proyectos"
                        icon: "folder"
                        on_release:
                            app.root.ids.nav_drawer.set_state("close")
                            app.root.ids.screen_manager.current = "proyectos"

                    NoRippleListItem:
                        text: "Habilidades"
                        icon: "tools"
                        on_release:
                            app.root.ids.nav_drawer.set_state("close")
                            app.root.ids.screen_manager.current = "habilidades"

    FloatLayout:
        SilentIconButton:
            id: hamburger_button
            icon: "menu"
            user_font_size: "32sp"
            pos_hint: {"top": 0.99, "x": 0.02}
            md_bg_color: (245/255, 245/255, 245/255, 1)  # Gris claro
            radius: [dp(12), dp(12), dp(12), dp(12)]
            on_release: app.toggle_nav_drawer()

<FondoWidget>:
    FloatLayout:
        Image:
            source: "../assets/img/perfil.jpg"
            allow_stretch: True
            keep_ratio: False
            size_hint: None, None
            size: dp(160), dp(160)
            pos_hint: {"center_x": 0.5, "top": 0.96}
            canvas.before:
                StencilPush
                Ellipse:
                    size: self.size
                    pos: self.pos
                StencilUse
            canvas:
                Rectangle:
                    texture: self.texture
                    size: self.size
                    pos: self.pos
            canvas.after:
                StencilUnUse
                Ellipse:
                    size: self.size
                    pos: self.pos
                StencilPop

        Label:
            text: "Nombre Apellido"
            color: (0, 0, 0, 1)  # Negro
            size_hint: None, None
            size: dp(210), dp(30)
            pos_hint: {"center_x": 0.5, "top": 0.68}
            font_size: "18sp"
            bold: True
            halign: "center"
            valign: "middle"
            text_size: self.size
            canvas.before:
                Color:
                    rgba: (225/255, 225/255, 225/255, 1)
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [10]

        Label:
            text: "Desarrollador | Programador"
            color: (0, 0, 0, 1)  # Negro
            size_hint: None, None
            size: dp(210), dp(30)
            pos_hint: {"center_x": 0.5, "top": 0.60}
            font_size: "14sp"
            halign: "center"
            valign: "middle"
            text_size: self.size
            canvas.before:
                Color:
                    rgba: (225/255, 225/255, 225/255, 1)
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [10]

        Button:
            background_normal: ""
            background_color: (0, 0, 0, 0)
            size_hint: None, None
            size: dp(80), dp(80)
            pos_hint: {"center_x": 0.5, "top": 0.45}
            on_release: root.abrir_github()
            canvas.before:
                StencilPush
                Ellipse:
                    size: self.size
                    pos: self.pos
                StencilUse
            canvas:
                Rectangle:
                    source: "../assets/img/github.png"
                    size: self.size
                    pos: self.pos
            canvas.after:
                StencilUnUse
                Ellipse:
                    size: self.size
                    pos: self.pos
                StencilPop

        Label:
            text: "Bienvenido a mi portafolio"
            color: (0, 0, 0, 1)  # Negro
            font_size: "20sp"
            size_hint: None, None
            size: dp(250), dp(30)
            pos_hint: {"center_x": 0.5, "top": 0.20}
            halign: "center"
            valign: "middle"
            text_size: self.size
            canvas.before:
                Color:
                    rgba: (225/255, 225/255, 225/255, 1)
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [10]

<SobreMiScreen>:
    BoxLayout:
        orientation: "vertical"
        spacing: dp(10)
        padding: 0, dp(10), 0, dp(10)

        AnchorLayout:
            size_hint_y: None
            height: dp(70)
            anchor_x: "center"
            anchor_y: "top"
            padding: dp(10), 0, dp(10), 0

            Label:
                text: "Sobre mi"
                color: (0, 0, 0, 1)
                size_hint: None, None
                size: dp(210), dp(30)
                font_size: "18sp"
                bold: True
                halign: "center"
                valign: "middle"
                text_size: self.size
                canvas.before:
                    Color:
                        rgba: (225/255, 225/255, 225/255, 1)
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [10]

        ScrollView:
            do_scroll_x: False
            bar_width: dp(4)
            size_hint_y: 1

            MDBoxLayout:
                orientation: "vertical"
                size_hint_y: None
                height: self.minimum_height
                padding: dp(16), 0, dp(16), dp(20)
                spacing: dp(20)

                MDCard:
                    size_hint: None, None
                    width: max(dp(240), min(root.width - dp(32), dp(520)))
                    height: content_box.height + dp(32)
                    pos_hint: {"center_x": 0.5}
                    radius: [15]
                    md_bg_color: (225/255, 225/255, 225/255, 1)
                    padding: dp(16)

                    MDBoxLayout:
                        id: content_box
                        orientation: "vertical"
                        size_hint_y: None
                        height: self.minimum_height
                        spacing: dp(12)

                        MDLabel:
                            text: "Hola, soy Nombre Apellido, un desarrollador entusiasta que disfruta crear experiencias digitales sencillas y efectivas."
                            font_style: "H6"
                            halign: "center"
                            size_hint_y: None
                            text_size: self.width, None
                            height: self.texture_size[1]

                        MDLabel:
                            text: "Me enfoco en construir interfaces funcionales y optimizadas para distintas pantallas, integrando buenas practicas de codigo y diseno."
                            theme_text_color: "Secondary"
                            halign: "justify"
                            size_hint_y: None
                            text_size: self.width, None
                            height: self.texture_size[1]

<ProyectosScreen>:
    BoxLayout:
        orientation: "vertical"
        spacing: dp(10)
        padding: 0, dp(10), 0, dp(10)

        AnchorLayout:
            size_hint_y: None
            height: dp(70)
            anchor_x: "center"
            anchor_y: "top"
            padding: dp(10), 0, dp(10), 0

            Label:
                text: "Mis Proyectos"
                color: (0, 0, 0, 1)
                size_hint: None, None
                size: dp(210), dp(30)
                font_size: "18sp"
                bold: True
                halign: "center"
                valign: "middle"
                text_size: self.size
                canvas.before:
                    Color:
                        rgba: (225/255, 225/255, 225/255, 1)
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [10]

        ScrollView:
            do_scroll_x: False
            bar_width: dp(4)
            size_hint_y: 1

            MDGridLayout:
                id: proyectos_grid
                cols: 1
                spacing: dp(20)
                padding: dp(10), 0, dp(10), dp(20)
                size_hint_y: None
                size_hint_x: 1
                height: self.minimum_height
<HabilidadesScreen>:
    BoxLayout:
        orientation: "vertical"
        spacing: dp(10)
        padding: 0, dp(10), 0, dp(10)

        AnchorLayout:
            size_hint_y: None
            height: dp(70)
            anchor_x: "center"
            anchor_y: "top"
            padding: dp(10), 0, dp(10), 0

            Label:
                text: "Habilidades"
                color: (0, 0, 0, 1)
                size_hint: None, None
                size: dp(210), dp(30)
                font_size: "18sp"
                bold: True
                halign: "center"
                valign: "middle"
                text_size: self.size
                canvas.before:
                    Color:
                        rgba: (225/255, 225/255, 225/255, 1)
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [10]

        ScrollView:
            do_scroll_x: False
            bar_width: dp(4)
            size_hint_y: 1

            MDGridLayout:
                id: habilidades_grid
                cols: 1
                spacing: dp(20)
                padding: dp(10), 0, dp(10), dp(20)
                size_hint_y: None
                size_hint_x: 1
                height: self.minimum_height
