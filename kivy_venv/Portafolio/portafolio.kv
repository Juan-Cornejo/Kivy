#:import MDNavigationLayout kivymd.uix.navigationdrawer.MDNavigationLayout
#:import MDNavigationDrawer kivymd.uix.navigationdrawer.MDNavigationDrawer
#:import MDList kivymd.uix.list.MDList
#:import dp kivy.metrics.dp
#:import FitImage kivymd.uix.fitimage.FitImage

FloatLayout:
    canvas.before:
        Color:
            rgba: (245/255, 245/255, 245/255, 1)  # Gris claro
        Rectangle:
            pos: self.pos
            size: self.size

    MDNavigationLayout:

        ScreenManager:
            id: screen_manager

            FondoWidget:
                name: "home"

            ProyectosScreen:
                name: "proyectos"

            SobreMiScreen:
                name: "sobremi"
            
            HabilidadesScreen:
                name: "habilidades"

        MDNavigationDrawer:
            id: nav_drawer
            md_bg_color: (245/255, 245/255, 245/255, 1)  # Gris claro

            BoxLayout:
                orientation: 'vertical'
                padding: "8dp"
                spacing: "8dp"

                MDList:
                    NoRippleListItem:
                        text: "Inicio"
                        icon: "home"
                        on_release:
                            app.root.ids.nav_drawer.set_state("close")
                            app.root.ids.screen_manager.current = "home"

                    NoRippleListItem:
                        text: "Sobre mí"
                        icon: "account"
                        on_release:
                            app.root.ids.nav_drawer.set_state("close")
                            app.root.ids.screen_manager.current = "sobremi"

                    NoRippleListItem:
                        text: "Mis proyectos"
                        icon: "folder"
                        on_release:
                            app.root.ids.nav_drawer.set_state("close")
                            app.root.ids.screen_manager.current = "proyectos"

                    NoRippleListItem:
                        text: "Habilidades"
                        icon: "tools"
                        on_release:
                            app.root.ids.nav_drawer.set_state("close")
                            app.root.ids.screen_manager.current = "habilidades"

    FloatLayout:
        SilentIconButton:
            id: hamburger_button
            icon: "menu"
            user_font_size: "32sp"
            pos_hint: {"top": 0.99, "x": 0.02}
            md_bg_color: (245/255, 245/255, 245/255, 1)  # Gris claro
            radius: [dp(12), dp(12), dp(12), dp(12)]
            on_release: app.toggle_nav_drawer()

<FondoWidget>:
    FloatLayout:
        Image:
            source: "assets/img/perfil.jpg"
            allow_stretch: True
            keep_ratio: False
            size_hint: None, None
            size: dp(160), dp(160)
            pos_hint: {"center_x": 0.5, "top": 0.96}
            canvas.before:
                StencilPush
                Ellipse:
                    size: self.size
                    pos: self.pos
                StencilUse
            canvas:
                Rectangle:
                    texture: self.texture
                    size: self.size
                    pos: self.pos
            canvas.after:
                StencilUnUse
                Ellipse:
                    size: self.size
                    pos: self.pos
                StencilPop

        Label:
            text: "Nombre Apellido"
            color: (0, 0, 0, 1)  # Negro
            size_hint: None, None
            size: dp(210), dp(30)
            pos_hint: {"center_x": 0.5, "top": 0.68}
            font_size: "18sp"
            bold: True
            halign: "center"
            valign: "middle"
            text_size: self.size
            canvas.before:
                Color:
                    rgba: (225/255, 225/255, 225/255, 1)
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [10]

        Label:
            text: "Desarrollador | Programador"
            color: (0, 0, 0, 1)  # Negro
            size_hint: None, None
            size: dp(210), dp(30)
            pos_hint: {"center_x": 0.5, "top": 0.60}
            font_size: "14sp"
            halign: "center"
            valign: "middle"
            text_size: self.size
            canvas.before:
                Color:
                    rgba: (225/255, 225/255, 225/255, 1)
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [10]

        Button:
            background_normal: ""
            background_color: (0, 0, 0, 0)
            size_hint: None, None
            size: dp(80), dp(80)
            pos_hint: {"center_x": 0.5, "top": 0.45}
            on_release: root.abrir_github()
            canvas.before:
                StencilPush
                Ellipse:
                    size: self.size
                    pos: self.pos
                StencilUse
            canvas:
                Rectangle:
                    source: "assets/img/github.png"
                    size: self.size
                    pos: self.pos
            canvas.after:
                StencilUnUse
                Ellipse:
                    size: self.size
                    pos: self.pos
                StencilPop

        Label:
            text: "Bienvenido a mi portafolio"
            color: (0, 0, 0, 1)  # Negro
            font_size: "20sp"
            size_hint: None, None
            size: dp(250), dp(30)
            pos_hint: {"center_x": 0.5, "top": 0.20}
            halign: "center"
            valign: "middle"
            text_size: self.size
            canvas.before:
                Color:
                    rgba: (225/255, 225/255, 225/255, 1)
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [10]

<SobreMiScreen>:
    FloatLayout:
        # Título "Sobre mí" con fondo y un borde redondeado
        Label:
            text: "Sobre mí"
            color: (0, 0, 0, 1)  # Negro
            size_hint: None, None
            size: dp(210), dp(30)  # Ajusta el tamaño según tus necesidades
            pos_hint: {"center_x": 0.5, "top": 0.98}  # Centrado y un poco más arriba
            font_size: "18sp"  # Tamaño de fuente más grande
            bold: True
            halign: "center"
            valign: "middle"
            text_size: self.size
            canvas.before:
                Color:
                    rgba: (225/255, 225/255, 225/255, 1)
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [10]  # Bordes redondeados
        
        MDCard:
            size_hint: None, None
            size: dp(320), dp(200)  # Ajusta el tamaño del rectángulo
            pos_hint: {"center_x": 0.5, "top": 0.75}  # Centrado y un poco más abajo
            radius: [15]  # Bordes redondeados
            md_bg_color: (225/255, 225/255, 225/255, 1)

            BoxLayout:
                orientation: 'vertical'
                padding: dp(10)

                Label:
                    text: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat."
                    color: (0, 0, 0, 1)  # Negro
                    size_hint: 1, None
                    height: self.texture_size[1]  # Ajusta la altura del Label automáticamente
                    halign: 'justify'
                    text_size: self.size  # Hace que el texto se ajuste al tamaño del Label
                    valign: 'middle'  # Centra el texto verticalmente
                    line_height: 1.5  # Ajusta la altura entre líneas para mejorar la legibilidad

<ProyectosScreen>:  
    FloatLayout:
        # Título "Mis Proyectos" con fondo y un borde redondeado
        Label:
            text: "Mis Proyectos"
            color: (0, 0, 0, 1)
            size_hint: None, None
            size: dp(210), dp(30)  # Ajusta el tamaño según tus necesidades
            pos_hint: {"center_x": 0.5, "top": 0.98}  # Centrado y un poco más arriba
            font_size: "18sp"  # Tamaño de fuente más grande
            bold: True
            halign: "center"
            valign: "middle"
            text_size: self.size
            canvas.before:
                Color:
                    rgba: (225/255, 225/255, 225/255, 1)
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [10]  # Bordes redondeados

    AnchorLayout:
        anchor_x: "center"
        anchor_y: "top"
        padding: dp(10), dp(70), dp(10), 0 

        MDGridLayout:
            cols: 1
            spacing: dp(20)
            size_hint: None, None
            size: self.minimum_size

            MDCard:
                size_hint: None, None
                size: "320dp", "170dp"
                radius: [15,]
                padding: 0
                md_bg_color: (225/255, 225/255, 225/255, 1)

                BoxLayout:
                    orientation: "vertical"
                    spacing: dp(5)
                    padding: 0

                    FitImage:
                        source: "assets/img/luna.jpg"
                        size_hint_y: None
                        height: dp(80)
                        radius: [15, 15, 0, 0]
                        allow_stretch: True
                        keep_ratio: False

                    MDLabel:
                        text: "Proyecto 1"
                        font_style: "H6"
                        size_hint_y: None
                        height: self.texture_size[1]
                        halign: "center"  # Centra el texto horizontalmente
                        valign: "middle"  # Centra el texto verticalmente
                        pos_hint: {"center_x": 0.5}  # Centra el label en el eje X

                    MDLabel:
                        text: "Descripción breve del proyecto 1"
                        theme_text_color: "Secondary"
                        size_hint_y: None
                        height: self.texture_size[1]
                        halign: "center"  # Centra el texto horizontalmente
                        valign: "middle"  # Centra el texto verticalmente
                        pos_hint: {"center_x": 0.5}  # Centra el label en el eje X

                    SilentRectangleFlatButton:
                        text: "Ver más"
                        pos_hint: {"center_x": 0.5, "center_y": 0.5}
                        on_release: root.abrir_enlace("https://github.com/tuusuario/proyecto1")

            MDCard:
                size_hint: None, None
                size: "320dp", "170dp"
                radius: [15,]
                padding: 0
                md_bg_color: (225/255, 225/255, 225/255, 1)

                BoxLayout:
                    orientation: "vertical"
                    spacing: dp(5)
                    padding: 0

                    FitImage:
                        source: "assets/img/luna.jpg"
                        size_hint_y: None
                        height: dp(80)
                        radius: [15, 15, 0, 0]
                        allow_stretch: True
                        keep_ratio: False

                    MDLabel:
                        text: "Proyecto 2"
                        font_style: "H6"
                        size_hint_y: None
                        height: self.texture_size[1]
                        halign: "center"  # Centra el texto horizontalmente
                        valign: "middle"  # Centra el texto verticalmente
                        pos_hint: {"center_x": 0.5}  # Centra el label en el eje X

                    MDLabel:
                        text: "Descripción breve del proyecto 2"
                        theme_text_color: "Secondary"
                        size_hint_y: None
                        height: self.texture_size[1]
                        halign: "center"  # Centra el texto horizontalmente
                        valign: "middle"  # Centra el texto verticalmente
                        pos_hint: {"center_x": 0.5}  # Centra el label en el eje X

                    SilentRectangleFlatButton:
                        text: "Ver más"
                        pos_hint: {"center_x": 0.5, "center_y": 0.5}
                        on_release: root.abrir_enlace("https://github.com/tuusuario/proyecto2")

            MDCard:
                size_hint: None, None
                size: "320dp", "170dp"
                radius: [15,]
                padding: 0
                md_bg_color: (225/255, 225/255, 225/255, 1)

                BoxLayout:
                    orientation: "vertical"
                    spacing: dp(5)
                    padding: 0

                    FitImage:
                        source: "assets/img/luna.jpg"
                        size_hint_y: None
                        height: dp(80)
                        radius: [15, 15, 0, 0]
                        allow_stretch: True
                        keep_ratio: False

                    MDLabel:
                        text: "Proyecto 3"
                        font_style: "H6"
                        size_hint_y: None
                        height: self.texture_size[1]
                        halign: "center"  # Centra el texto horizontalmente
                        valign: "middle"  # Centra el texto verticalmente
                        pos_hint: {"center_x": 0.5}  # Centra el label en el eje X

                    MDLabel:
                        text: "Descripción breve del proyecto 3"
                        theme_text_color: "Secondary"
                        size_hint_y: None
                        height: self.texture_size[1]
                        halign: "center"  # Centra el texto horizontalmente
                        valign: "middle"  # Centra el texto verticalmente
                        pos_hint: {"center_x": 0.5}  # Centra el label en el eje X

                    SilentRectangleFlatButton:
                        text: "Ver más"
                        pos_hint: {"center_x": 0.5, "center_y": 0.5}
                        on_release: root.abrir_enlace("https://github.com/tuusuario/proyecto3")

<HabilidadesScreen>:
    FloatLayout:
        # Título "Habilidades" con fondo y un borde redondeado
        Label:
            text: "Habilidades"
            color: (0, 0, 0, 1)
            size_hint: None, None
            size: dp(210), dp(30)  # Ajusta el tamaño según tus necesidades
            pos_hint: {"center_x": 0.5, "top": 0.98}  # Centrado y un poco más arriba
            font_size: "18sp"  # Tamaño de fuente más grande
            bold: True
            halign: "center"
            valign: "middle"
            text_size: self.size
            canvas.before:
                Color:
                    rgba: (225/255, 225/255, 225/255, 1)
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [10]  # Bordes redondeados

    AnchorLayout:
        anchor_x: "center"
        anchor_y: "top"
        padding: dp(10), dp(70), dp(10), 0 

        MDGridLayout:
            cols: 1
            spacing: dp(20)
            size_hint: None, None
            size: self.minimum_size

            MDCard:
                size_hint: None, None
                size: "320dp", "170dp"
                radius: [15,]
                padding: 0
                md_bg_color: (225/255, 225/255, 225/255, 1)

                BoxLayout:
                    orientation: "vertical"
                    spacing: dp(5)
                    padding: 0

                    FitImage:
                        source: "assets/img/html.jpg"
                        size_hint_y: None
                        height: dp(120)
                        radius: [15, 15, 0, 0]
                        allow_stretch: True
                        keep_ratio: False

                    MDLabel:
                        text: "HTML"
                        font_style: "H6"
                        size_hint_y: None
                        height: self.texture_size[1]
                        halign: "center"  # Centra el texto horizontalmente
                        valign: "middle"  # Centra el texto verticalmente
                        pos_hint: {"center_x": 0.5}  # Centra el label en el eje X

                    MDLabel:
                        text: "Advanced"
                        theme_text_color: "Secondary"
                        size_hint_y: None
                        height: self.texture_size[1]
                        halign: "center"  # Centra el texto horizontalmente
                        valign: "middle"  # Centra el texto verticalmente
                        pos_hint: {"center_x": 0.5}  # Centra el label en el eje X

            MDCard:
                size_hint: None, None
                size: "320dp", "170dp"
                radius: [15,]
                padding: 0
                md_bg_color: (225/255, 225/255, 225/255, 1)

                BoxLayout:
                    orientation: "vertical"
                    spacing: dp(5)
                    padding: 0

                    FitImage:
                        source: "assets/img/css.jpg"
                        size_hint_y: None
                        height: dp(120)
                        radius: [15, 15, 0, 0]
                        allow_stretch: True
                        keep_ratio: False

                    MDLabel:
                        text: "CSS"
                        font_style: "H6"
                        size_hint_y: None
                        height: self.texture_size[1]
                        halign: "center"  # Centra el texto horizontalmente
                        valign: "middle"  # Centra el texto verticalmente
                        pos_hint: {"center_x": 0.5}  # Centra el label en el eje X

                    MDLabel:
                        text: "Intermediate"
                        theme_text_color: "Secondary"
                        size_hint_y: None
                        height: self.texture_size[1]
                        halign: "center"  # Centra el texto horizontalmente
                        valign: "middle"  # Centra el texto verticalmente
                        pos_hint: {"center_x": 0.5}  # Centra el label en el eje X

            MDCard:
                size_hint: None, None
                size: "320dp", "170dp"
                radius: [15,]
                padding: 0
                md_bg_color: (225/255, 225/255, 225/255, 1)

                BoxLayout:
                    orientation: "vertical"
                    spacing: dp(5)
                    padding: 0

                    FitImage:
                        source: "assets/img/python.jpg"
                        size_hint_y: None
                        height: dp(120)
                        radius: [15, 15, 0, 0]
                        allow_stretch: True
                        keep_ratio: False

                    MDLabel:
                        text: "Python"
                        font_style: "H6"
                        size_hint_y: None
                        height: self.texture_size[1]
                        halign: "center"  # Centra el texto horizontalmente
                        valign: "middle"  # Centra el texto verticalmente
                        pos_hint: {"center_x": 0.5}  # Centra el label en el eje X

                    MDLabel:
                        text: "Intermediate"
                        theme_text_color: "Secondary"
                        size_hint_y: None
                        height: self.texture_size[1]
                        halign: "center"  # Centra el texto horizontalmente
                        valign: "middle"  # Centra el texto verticalmente
                        pos_hint: {"center_x": 0.5}  # Centra el label en el eje X